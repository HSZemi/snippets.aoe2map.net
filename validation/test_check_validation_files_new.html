<html><head>
    <meta charset="utf-8">
    <title>snippets.aoe2map.net</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/railscasts.css">
    <style>
        html,
        body {
            height: 100%;
        }

        .container {
            min-height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .hljs-ln td.hljs-ln-numbers {
            text-align: right;
            padding-right: 1rem;
            color: gray;
        }

        #rmsInput {
            font-family: "Courier New", monospace;
            font-size: .8rem;
            border: 1px solid gray;
            background-color: #444;
            color: inherit;
        }
    </style>
<style type="text/css">.hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}</style></head>
<body spellcheck="false">
<div class="container">
    <div class="card mt-4 mb-4">
        <div class="card-header text-center">
            <h1>
                <a href="../">snippets.aoe2map.net</a>
            </h1>
            <p class="lead">Share Age of Empires 2 Random Map Script snippets online</p>
        </div>
        <div class="card-body">

            
            <div class="card-text">

                
                <form method="POST">
                    <div class="row">
                        <div class="col-10">
                            <div class="form-group">
                                <label for="titleInput">Snippet Title</label>
                                <input type="text" class="form-control" id="titleInput" name="titleInput" aria-describedby="titleInputHelp" value="">
                            </div>
                        </div>
                        <div class="col-2">
                            <button type="submit" id="btn-save" class="btn btn-lg btn-block btn-primary" style="height: 100%;">Save
                            </button>
                        </div>
                    </div>

                    <ul class="nav nav-tabs">
                        <li class="nav-item">
                            <a class="nav-link active" id="tabWrite" href="#">Write</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="tabPreview" href="#">Preview</a>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link btn btn-secondary" id="tabAutoformat" type="button">Autoformat
                            </button>
                        </li>
                        <li class="nav-item">
                            <div class="custom-control custom-checkbox my-2 ml-3">
                                <input type="checkbox" class="custom-control-input" id="publiclyAvailableCheckbox" name="publiclyAvailableCheckbox">
                                <label class="custom-control-label" for="publiclyAvailableCheckbox">List this snippet on
                                    main page</label>
                            </div>
                        </li>
                    </ul>

                    <div class="tab-content" id="write">
                        <div class="form-group">
                            <textarea id="rmsInput" name="rmsInput" class="col-12" rows="20"></textarea>
                        </div>
                    </div>
                    <div class="tab-content" id="preview" style="display: none;">
                        <pre><code class="rms" id="codearea"></code></pre>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script src="../js/highlight.js"></script>
<script src="../js/highlight.js-rms.js"></script>
<script src="../js/highlightjs-line-numbers.min.js"></script>
<script type="text/javascript">
    function autoformat() {
        let oldValue = document.querySelector('#rmsInput').value;
        document.querySelector('#rmsInput').value = normalizeMap(oldValue);
        updatePreviewArea();
    }

    hljs.registerLanguage('rmslanguage', rmslanguage);

    function updatePreviewArea() {
        let codearea = document.querySelector('#codearea');
        codearea.textContent = document.querySelector('#rmsInput').value;
        hljs.highlightBlock(codearea);
        hljs.lineNumbersBlock(codearea, {singleLine: true});
    }

    document.querySelector('#tabPreview').addEventListener('click', function (e) {
        e.preventDefault();
        updatePreviewArea();
        document.querySelector('#tabWrite').classList.remove('active');
        document.querySelector('#tabPreview').classList.add('active');
        document.querySelector('#write').style.display = 'none';
        document.querySelector('#preview').style.display = 'block';
    });

    document.querySelector('#tabWrite').addEventListener('click', function (e) {
        e.preventDefault();
        document.querySelector('#tabWrite').classList.add('active');
        document.querySelector('#tabPreview').classList.remove('active');
        document.querySelector('#write').style.display = 'block';
        document.querySelector('#preview').style.display = 'none';
    });

    let copyPublicUrlButton = document.querySelector('#copyPublicUrlButton');
    if (copyPublicUrlButton !== null) {
        copyPublicUrlButton.addEventListener('click', function () {
            copyToClipboard(document.querySelector('#publicUrlInput').value);
            document.querySelector('#copyPublicUrlButton').innerHTML = 'Copied!';
            setTimeout(function () {
                document.querySelector('#copyPublicUrlButton').innerHTML = 'Copy';
            }, 1500);
        });
    }

    let copyPrivateUrlButton = document.querySelector('#copyPrivateUrlButton');
    if (copyPrivateUrlButton !== null) {
        copyPrivateUrlButton.addEventListener('click', function () {
            copyToClipboard(document.querySelector('#privateUrlInput').value);
            document.querySelector('#copyPrivateUrlButton').innerHTML = 'Copied!';
            setTimeout(function () {
                document.querySelector('#copyPrivateUrlButton').innerHTML = 'Copy';
            }, 1500);
        });
    }

    document.querySelector('#tabAutoformat').addEventListener('click', function () {
        autoformat();
    });

    function copyToClipboard(str) {
        const el = document.createElement('textarea');
        el.value = str;
        el.setAttribute('readonly', '');
        el.style.position = 'absolute';
        el.style.left = '-9999px';
        document.body.appendChild(el);
        const selected =
            document.getSelection().rangeCount > 0
                ? document.getSelection().getRangeAt(0)
                : false;
        el.select();
        document.execCommand('copy');
        document.body.removeChild(el);
        if (selected) {
            document.getSelection().removeAllRanges();
            document.getSelection().addRange(selected);
        }
    }

</script>

</body></html>
